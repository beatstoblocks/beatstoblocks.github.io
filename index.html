<!DOCTYPE html>
<script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Beats To Blocks</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <h1>Beats To Blocks</h1>
        <p><strong>By Peter Akdemir, Dustin La, Joshua Quizon, Rahul Shah</strong></p>

        <div class="section">
            <h2>Overview</h2>
            <p>Given any song in a .wav file format, split the song into its 
                unique stems and convert it to MIDI format. Using the MIDI 
                file, create a Minecraft Note Block cover (audio only) using 
                the same or similar instruments used within the original song. 
                This program will allow any song to be converted into a 
                Minecraft Note Block cover automatically without needing 
                to identify notes manually and creating a MIDI file for 
                the song or creating within Minecraft itself. 
            </p>
        </div>

        <div class="section">
            <h2>Motivation</h2>
            <p>There are many covers of existing songs that are made using 
                Minecraft note blocks, however the process of converting 
                these songs to note block format is obscure. 
                This project aims to automate the transcription 
                process using a model to transform a song to MIDI format, 
                and MIDI format to a set of Minecraft note blocks. 
                While the production level version of this project 
                can be used to create more noteblock covers for existing 
                songs, the main motivation behind it is the interesting and 
                “cool” aspect of audio transcription.</p>
        </div>

        <br>
        <div class="section">
            <h2>Machine Listening Models</h2>
            <h3>Spleeter</h3>
            <p>A music source separation tool that uses pre-trained models. 
                It takes in a waveform as input, and outputs a 5 splits max: 
                vocals, drums, bass, piano, and other. Research papers state 
                that it is one of the best performing 4-stem separation models
                using the musdb18 benchmark.</p>

            <h3>Demucs</h3>
            <p>Short for “Deep Extractor for Music Sources,” it is a 
                stem splitting model that takes in a waveform as input. 
                The output is a 4-way split of bass, drums, vocals, and 
                other sounds. Specifically, the version of Demucs being 
                used is an implementation using Transforms, which performs 
                better by accounting for both long and short music content.  
                In research papers, it has been stated to perform better 
                source separation for bass and drum splits.</p>
            
            <h3>MT3</h3>
            <p>A music transcription model that takes a waveform as 
                input and transcribes it to a MIDI equivalent. 
                It performs well in regards to evaluating how accurate 
                its estimations of frames, onsets, and offsets are. 
                While MT3 is not a lightweight technology, it is very 
                strong in its transcription capabilities–it can detect
                multiple instruments and notes played by those instruments.
            </p>
                
            <h3>Spotify Basic Pitch</h3>
            <p>In the context of automatic music transcription, 
                Basic Pitch aims to deliver a product that is both powerful, 
                but lightweight enough to be used in a production environment. 
                The library accepts a waveform as input, and translates it 
                into MIDI format. Performance demonstrates that the system 
                exceeds the benchmark of other AMT systems in terms of 
                frame-wise onset, multipitch, and note-activation estimations. 
                It is important to note that unlike MT3, Basic Pitch only 
                estimates notes, not instruments.
            </p>
        </div>
        <br>
        <div class="section">
            <h2>Open Note Block Studio</h2>
            <p>Open Note Block Studio is a software that allows users to 
                create MIDI files and map to Minecraft Note Blocks through 
                a graphical user interface. Within our program, we can create 
                our own Minecraft Note Block Studio (NBS) files using the 
                opennbs python package. To create our final audio outputs, 
                we use the nbswave python package transform the nbs file 
                into a .wav file. 
            </p>
        </div>

        <br>
        <div class="section">
            <h2>Pipelines</h2>
            <h3>Pipeline #1 - MT3 Only</h3>
            <p>This pipeline only uses the MT3 model. 
                It transcribes the original source file and uses it as 
                input for MT3.</p>
                <h3>Pipeline #2 - Demucs, Spleeter, MT3</h3>
                <p>This pipeline uses Demucs to split the track into bass, drums, vocals, and other sounds. 
                    It then splits the other stems through Spleeter to obtain the piano and other stems separately. 
                    Finally, it transcribes all of these files through MT3. The specific files chosen for this pipeline are:
                    <ol>
                        <li>Demucs with Spleeter:
                            <ul> 
                                <li> piano.mid </li>
                                <li> other.mid </li>
                            </ul>
                        </li>
                        <li>Demucs only:
                            <ul>
                                <li> drums.mid </li>
                                <li> bass.mid </li>
                            </ul>
                        </li>
                    </ol>
                </p>
                
                <h3>Pipeline #3 - Spleeter and MT3</h3>
                <p>This pipeline uses Spleeter to split the track into piano, drums, bass, and other. 
                    These stems are then transcribed into MIDI using MT3. The specific files chosen for this pipeline are:
                    <ul>
                        <li>piano.mid</li>
                        <li>drums.mid</li>
                        <li>bass.mid</li>
                        <li>other.mid</li>
                    </ul>
                </p>
                
                <h3>Pipeline #4 - Demucs, Spleeter, Spotify Basic Pitch</h3>
                <p>This pipeline uses Demucs to split the track into bass, drums, vocals, and other sounds. 
                    It then splits the other stems through Spleeter to obtain the piano and other stems separately. 
                    Finally, it transcribes all of these files through Spotify Basic Pitch. The specific files chosen for this pipeline are:
                </p>
                    
                <ol>
                    <li>Demucs with Spleeter:
                        <ul> 
                            <li> piano.mid </li>
                            <li> other.mid </li>
                        </ul>
                    </li>
                    <li>Demucs only:
                        <ul>
                            <li> drums.mid </li>
                            <li> bass.mid </li>
                        </ul>
                    </li>
                </ol>

                <h3>Pipeline #5 - Spleeter and Spotify Basic Pitch</h3>
                <p>This pipeline uses Spleeter to split the track into piano, drums, bass, and other. 
                    These stems are then transcribed into MIDI using Spotify Basic Pitch. The specific files chosen for this pipeline are:
                    <ul>
                        <li>piano.mid</li>
                        <li>drums.mid</li>
                        <li>bass.mid</li>
                        <li>other.mid</li>
                    </ul>
                </p>
        </div>

        <br>
        <div class="section">
            <h2>Dataset</h2>
            <p>Insert info here
            </p>
        </div>

        <br>
        <div class="section">
            <h2>Outputs and Results</h2>
            <h3>Input File</h3>
            <p>This is our input file from the BabySlakh dataset. 
                This is the first minute of Track00001 that we will be 
                inputting into our program:</p>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>

            <h3>Demucs Splitting</h3>
            <p>When putting our input file of Track00001 
                through Demucs, the following splits of 
                bass.wav, drums.wav, vocals.wav, and 
                other.wav are created:
            </p>
            <h4>bass.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>drums.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>vocals.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>other.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>

            <h3>Spleeter Splitting</h3>
            <p>When putting our input file of Track00001 
                through Spleeter, the following splits of 
                bass.wav, drums.wav, vocals.wav, and 
                other.wav, and piano.wav are created:
            </p>
            <h4>bass.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>drums.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>vocals.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>other.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>piano.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>


            <h3>Demucs into Spleeter</h3>
            <p>After obtaining the outputs from Demucs, 
                to further isolate the piano instrument 
                from the other.wav split, Demucs output 
                of other.wav is put through spleeter to 
                obtain the following two files of 
                other.wav and piano.wav. 
            </p>

            <h4>other.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>piano.wav</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>

            
            <h3>Spotify Basic Pitch Output</h3>
            <p>After obtaining the split files 
                from Demucs, Spleeter, and Demucs 
                into Spleeter, the files are then 
                transcribed to MIDI using Spotify 
                Basic Pitch: 
            </p>

            <h4>Demucs</h4>
            <h5>bass.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h5>drums.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>vocals.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>other.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h4>Spleeter</h4>
            <h5>bass.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h5>drums.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>vocals.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>other.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>piano.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h4>Demucs into Spleeter</h4>
            <h5>other.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h5>piano.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h3>MT3</h3>
            <p>Additionally, these same split files as above are
                transcribed to MIDI using MT3:
            </p>

            <h4>Demucs</h4>
            <h5>bass.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h5>drums.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>vocals.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>other.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h4>Spleeter</h4>
            <h5>bass.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h5>drums.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>vocals.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>other.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h5>piano.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>

            <h4>Demucs into Spleeter</h4>
            <h5>other.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h5>piano.mid</h5>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            
            <h3>Combining MIDI</h3>
            <p>The following are the above five mentioned Pipelines with the MIDI stem files combined to create each pipeline MIDI file:
                transcribed to MIDI using MT3:
            </p>

            <h4>Pipeline #1 Combined MIDI</h4>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            <h4>Pipeline #2 Combined MIDI</h4>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            <h4>Pipeline #3 Combined MIDI</h4>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            <h4>Pipeline #4 Combined MIDI</h4>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>
            <h4>Pipeline #5 Combined MIDI</h4>
            <midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer>
            <midi-player
            src="https://magenta.github.io/magenta-js/music/demos/melody.mid"
            sound-font visualizer="#myVisualizer">
            </midi-player>


            <h3>MIDI to Noteblock Studio (NBS) to Final Audio Outputs</h3>
            <p>The MIDI files are then transcribed to Note Block Studio to be converted into Minecraft Note Blocks using Note Block Studio (NBS) Files. 
                Finally, the NBS Files are converted to wav audio and produce the final output:
            </p>

            <h4>Pipeline #1</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>Pipeline #2</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>Pipeline #3</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>Pipeline #4</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
            <h4>Pipeline #5</h4>
            <audio controls autoplay>
                <source src = "output_data/sounds/sample.wav" type="audio/wav">
            </audio>
        </div>

        <div class="section">
            <h2>Evaluation</h2>
            <p> Add info here
            </p>
        </div>

        
        <div class="section">
            <h2>Imported into Minecraft</h2>
            <p> Add info here
            </p>
        </div>

    </body>
</html>
